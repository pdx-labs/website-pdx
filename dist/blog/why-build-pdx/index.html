<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Why build PDX? | PDX</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pdxlabs.io/img/socialcard.png"><meta data-rh="true" name="twitter:image" content="https://pdxlabs.io/img/socialcard.png"><meta data-rh="true" property="og:url" content="https://pdxlabs.io/blog/why-build-pdx"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Why build PDX? | PDX"><meta data-rh="true" name="description" content="A framework for building and managing applications powered by Large Language Models LLMs"><meta data-rh="true" property="og:description" content="A framework for building and managing applications powered by Large Language Models LLMs"><meta data-rh="true" name="keywords" content="llm,apps"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-07-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://krishadi.com"><meta data-rh="true" property="article:tag" content="llm,apps"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://pdxlabs.io/blog/why-build-pdx"><link data-rh="true" rel="alternate" href="https://pdxlabs.io/blog/why-build-pdx" hreflang="en"><link data-rh="true" rel="alternate" href="https://pdxlabs.io/blog/why-build-pdx" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="PDX RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="PDX Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b71779f7.css">
<link rel="preload" href="/assets/js/runtime~main.d7d96405.js" as="script">
<link rel="preload" href="/assets/js/main.fda9f254.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-dark.svg" alt="PDX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-light.svg" alt="PDX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started/introduction">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://github.com/pdx-labs/pdx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/why-build-pdx">Why build PDX?</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Why build PDX?</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-07-01T00:00:00.000Z" itemprop="datePublished">July 1, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://krishadi.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/krish-adi.png" alt="Adithya Krishnan"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://krishadi.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Adithya Krishnan</span></a></div><small class="avatar__subtitle" itemprop="description">PDX maintainer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>In the last 6 months, I&#x27;ve been building a lot of applications that are being powered by LLMs. And, in this time, none of the available frameworks helped me satisfy the requirements I had. Eventually, I had to write a lot of scaffold code that I reused across all these applications. PDX is a consolidation of all that scaffold code, which I find very useful. And, hopefully to you too...</p><p>Before I start preaching about PDX, let me start with what the initial requirements were:</p><ol><li>Low on dependencies. You&#x27;re just making an call to an API with some text.</li><li>Managing prompt templates with Jinja. Jinja is a great templating engine, which is well architected for the use-cases one might encounter.</li><li>Separating prompt templates with the application code. Prompt templates are plaint text, and it has no business being written into the application code.</li><li>Chaining of prompts. Both text and chat completions need a well thought of way of sequencing the prompts.</li><li>Observability. Logging which prompts with which inputs gave which response from which model. Along with how long did it take and how many tokens were used.</li><li>A/B testing. Attributing the the above with the user feedback.</li><li>Caching responses. Separating the prompts as templates and inputs for those templates makes it easier for caching. Instead of looking up the entire prompt, only the inputs need to be looked up for a response.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-pdx">What is PDX?<a href="#what-is-pdx" class="hash-link" aria-label="Direct link to What is PDX?" title="Direct link to What is PDX?">​</a></h2><p>PDX is a prompt engineering and a dev-ops toolkit. At the core, it provides a framework on how to build and manage agents. An agent is an interface to the lanugage models, which is a collection of prompts and/or prompt templates with information that is used as input to the Language Models.</p><blockquote><p>Disambiguation: Some frameworks use the word Agent to describe an autonomous agent that perform a set of actions by interacting with the LLMs.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="folder-structure--config">Folder structure + config<a href="#folder-structure--config" class="hash-link" aria-label="Direct link to Folder structure + config" title="Direct link to Folder structure + config">​</a></h3><p>PDX borrows from <a href="https://flask.palletsprojects.com/en/2.3.x/blueprints/#" target="_blank" rel="noopener noreferrer">Flask-blueprints</a> the concept of modularising applications. Applications built to use LLMs, employ multiple different agents. And, PDX helps in modularising applications with folder-structures to build and manage agents.</p><blockquote><p>For example, an application that creates an itinerary would perhaps have one agent to create a draft itinerary with the inputs from the user. Which would pass the response to another agent that checks the itinerary for factual errors, another one that checks for correct formatting of timing and so on. With PDX, each of these agents would have a folder for each of them with just a configuration file and their respective templates.</p></blockquote><p>A typical agent folder would look like:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">demo_agent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ├── __init__.py</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ├── config.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ├── templates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    │   ├── 1_prompt.defaults.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    │   └── 1_prompt.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    └── tests</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        └── test_1.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With a folder for the prompt templates along with the default values of the template fields. A <a href="/docs/getting-started/main-concepts#agent-configuration">configuration file</a> for info on the prompt template, the model to use and so on. More info on this can be found <a href="/docs/getting-started/main-concepts#agent-configuration">here</a></p><p>Along with this a folder (<code>/tests</code>) contains tests for the agent, that can be used to keep track of the agent&#x27;s performance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prompt-templates">Prompt templates<a href="#prompt-templates" class="hash-link" aria-label="Direct link to Prompt templates" title="Direct link to Prompt templates">​</a></h3><p>Prompts to Language Models are text. A great way to reuse parts of this text prompt is to use templates, and <a href="https://jinja.palletsprojects.com/en/3.1.x/" target="_blank" rel="noopener noreferrer">Jinja</a> happens to be a great templating engine. Templates in PDX are written as Jinja tempaltes.</p><p>More often than not, the responses from the agents are non-deterministic. Thus when making changes to the prompts in the hope that they would perform better with their response, the changes need to be tested and evaluated. Maintaining the prompts for the agents separated from the application code has the advantage that you can version the prompts and some evaluation metrics for those prompts. This particularly helps when making changes to prompts, you could compare the performance to other versions of the prompts of the agent.</p><p>Another important aspect to this structure is caching. Instead of caching the entire prompt to the model and its response, we could optimize this by storing only the input to the prompt templates and its response. This eliminates the redundant template text for being stored and processed for each call.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="observability">Observability<a href="#observability" class="hash-link" aria-label="Direct link to Observability" title="Direct link to Observability">​</a></h3><p>For each agent execution, PDX provides a method to extract the meta information of the execution. This meta information includes prompt version, prompt template information, the input values to the agent, the model and the parameters used, the response, time taken to recieve the response and information on token usage.</p><p>This provides the ease of logging into any of the analytics tools.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concluding-thoughts">Concluding thoughts<a href="#concluding-thoughts" class="hash-link" aria-label="Direct link to Concluding thoughts" title="Direct link to Concluding thoughts">​</a></h2><p>This is mental model I&#x27;ve used for the projects I&#x27;ve worked on. One might say this a highly opinionated way of building interfaces to language models. Yes, it is and I hope it works for your use-case as well.</p><p><img loading="lazy" alt="PDX" src="/assets/images/pdx_info-0ca2d366750e0b4a1f6a7bfb7eb3f477.png" width="1200" height="630" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/llm">llm</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/apps">apps</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/pdx-labs/website-pdx/blog/2023-07-01-why-build-pdx/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-pdx" class="table-of-contents__link toc-highlight">What is PDX?</a><ul><li><a href="#folder-structure--config" class="table-of-contents__link toc-highlight">Folder structure + config</a></li><li><a href="#prompt-templates" class="table-of-contents__link toc-highlight">Prompt templates</a></li><li><a href="#observability" class="table-of-contents__link toc-highlight">Observability</a></li></ul></li><li><a href="#concluding-thoughts" class="table-of-contents__link toc-highlight">Concluding thoughts</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 PDX.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d7d96405.js"></script>
<script src="/assets/js/main.fda9f254.js"></script>
</body>
</html>