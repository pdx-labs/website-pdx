<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-getting-started/advanced-prompting">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Advanced prompting | PDX</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pdxlabs.io/img/socialcard.png"><meta data-rh="true" name="twitter:image" content="https://pdxlabs.io/img/socialcard.png"><meta data-rh="true" property="og:url" content="https://pdxlabs.io/docs/getting-started/advanced-prompting"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Advanced prompting | PDX"><meta data-rh="true" name="description" content="Advanced prompting and usage with PDX"><meta data-rh="true" property="og:description" content="Advanced prompting and usage with PDX"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://pdxlabs.io/docs/getting-started/advanced-prompting"><link data-rh="true" rel="alternate" href="https://pdxlabs.io/docs/getting-started/advanced-prompting" hreflang="en"><link data-rh="true" rel="alternate" href="https://pdxlabs.io/docs/getting-started/advanced-prompting" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="PDX RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="PDX Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KTJQ86VEGR"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KTJQ86VEGR",{})</script><link rel="stylesheet" href="/assets/css/styles.b71779f7.css">
<link rel="preload" href="/assets/js/runtime~main.ca00e62b.js" as="script">
<link rel="preload" href="/assets/js/main.278252f8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-dark.svg" alt="PDX" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-light.svg" alt="PDX" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/introduction">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/pdx-labs/pdx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/main-concepts">Main concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/create-an-agent">Create an Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/advanced-prompting">Advanced prompting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">PDX CLI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pdx-cli/create">create</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pdx-cli/test">test</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Advanced prompting</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Advanced concepts</h1><p>So far, we&#x27;ve delt with simple text completion prompts. But, to maximise the power of the complexity of language models is to build complex prompts. PDX is designed to be flexible and allow you to build complex prompts.</p><p>In this section, we&#x27;ll cover some of the advanced concepts that you can use to build complex prompts.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="chat-prompt">Chat Prompt<a href="#chat-prompt" class="hash-link" aria-label="Direct link to Chat Prompt" title="Direct link to Chat Prompt">​</a></h2><p>Chat style prompts are a special type of prompts that are design to mimic a conversation with the model.</p><blockquote><p>On a side note, some models are trained and tuned on chat style prompts, so it&#x27;s a good idea to use chat style prompts when you&#x27;re using those models.</p></blockquote><p>To implement a chat style prompt for your agent, you&#x27;d have to design your <code>config.yaml</code> in the following way. Let&#x27;s consider the following example chat prompt:</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 401 329.406" width="401" height="329.406" style="height:250px"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Cascadia.woff2)}</style></defs><path fill="#fff" d="M0 0h401v329.406H0z"></path><path d="M10.96 9.79c149.97-2.24 302.89-.92 379.5-.15m-380.21.12c146.84 1.86 293.76 1.03 380.91.75m-1.82-1.26c2.74 13.35-.29 28.67 1.93 49.52m-.67-48.14c.69 10.55.88 21.2 0 49.57m1.11-1.27c-123.27 2.22-243.87 3.67-382.43.8m382.17.44c-97.97-1.27-195.78-1.93-381.05-.35m-.33-1.48c.44-10.17-.58-21.61-.43-49.58m-.42 51.05c.31-18.8.5-38.67.49-49.23" stroke="#000" fill="none" stroke-linecap="round"></path><text x="35.156" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(165.344 23)">system</text><path d="M11.27 182.675c103.2-2.37 210.3-.62 263.29-.2m-264.23.15c102.23 2.05 204.55.96 265.16.99m-1.88-1.42c2.74 13.35-.29 28.67 1.93 49.52m-.67-48.14c.69 10.54.88 21.19 0 49.57m1.33-1.62c-86.93 2.33-170.33 4.25-267.15 1.06m266.81.58c-68.51-1.02-136.81-1.89-265.33-.46m-.46-1.43c.44-10.16-.58-21.61-.43-49.57m-.42 51.04c.31-18.79.5-38.66.49-49.22" stroke="#000" fill="none" stroke-linecap="round"></path><text x="52.734" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(89.9 195.941)">assistant</text><path d="M127 96.207c103.2-2.37 210.3-.62 263.29-.2m-264.23.15c102.23 2.05 204.55.96 265.16.99m-1.88-1.42c2.74 13.35-.29 28.67 1.93 49.52m-.67-48.14c.69 10.54.88 21.19 0 49.57m1.33-1.62c-86.93 2.33-170.33 4.25-267.15 1.06m266.81.58c-68.51-1.02-136.81-1.89-265.33-.46m-.46-1.43c.44-10.16-.58-21.61-.43-49.57m-.42 51.04c.31-18.79.5-38.66.49-49.22" stroke="#000" fill="none" stroke-linecap="round"></path><text x="23.438" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(234.928 109.473)">user</text><path d="M127 269.144c103.2-2.37 210.3-.62 263.29-.2m-264.23.15c102.23 2.05 204.55.96 265.16.99m-1.88-1.42c2.74 13.35-.29 28.67 1.93 49.52m-.67-48.14c.69 10.54.88 21.19 0 49.57m1.33-1.62c-86.93 2.33-170.33 4.25-267.15 1.06m266.81.58c-68.51-1.02-136.81-1.89-265.33-.46m-.46-1.43c.44-10.16-.58-21.61-.43-49.57m-.42 51.04c.31-18.79.5-38.66.49-49.22" stroke="#000" fill="none" stroke-linecap="round"></path><text x="23.438" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(234.928 282.41)">user</text></svg><p>Let&#x27;s create an example agent folder with a few temapltes, a config file and a test file.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── chat_agent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ├── __init__.py</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ├── config.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ├── templates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    │   ├── 0_system.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    │   ├── 1_assistant.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    │   ├── 1_user.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    │   └── 2_user.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    └── tests</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    └── test_1.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>config.yaml</code> file would look like this:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">chat_agent/config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># PDX AGENT CONFIG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> chat_agent_demo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">comment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> An agent to test chat completions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">3.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">turbo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 0_system.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1_user.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">assistant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1_assistant.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 2_user.jinja</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, let&#x27;s deconstruct what is written under <code>prompt</code> in the <code>config.yaml</code> file. The <code>prompt</code> key takes in a list of values (in YAML this is indicated by using <code>-</code>). This list contains the <code>role</code> and the corresponding template file name. The role also corresponds to the role in the chat style prompt. <code>user</code> corresponds to the <code>human</code>, and the <code>assistant</code> corresponds to the <code>model</code>. The <code>system</code> prompt is for those chat styles prompts (especially OpenAI gpt-3.5 and above models) that use a <code>system</code> prompt as a preset for providing information to the model. This <code>system</code> prompt when not used by the model will be converted to the <code>equivalent</code> of <code>user</code> prompt for the model (for example, Anthropic doesn&#x27;t use a <code>system</code> prompt as of this writing, and will be converted to <code>Human</code> prompt).</p><p>Input to these agents would also have to correspond to referencing the template name for rendering variables value to the template. For example, if you&#x27;d like to provide a value to the template <code>1_user</code> you&#x27;d have to provide the input as <code>1_user: &lt;value&gt;</code>.</p><p>Let&#x27;s write a test case for this agent:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">chat_agent/tests/test_1.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">0_system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">some_variable_here</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">2_user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">another_variable_here</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 2&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And similarly when executing this agent within your application code using the <code>Agent</code> class, you&#x27;d have to provide the input as:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">chat_agent_demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0_system&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;some_variable_here&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2_user&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;another_variable_here&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prompt-trees">Prompt Trees<a href="#prompt-trees" class="hash-link" aria-label="Direct link to Prompt Trees" title="Direct link to Prompt Trees">​</a></h2><p>If you&#x27;ve followed along with the earlier bit, now it&#x27;s time to up the complexity!</p><p>Prompt trees are a way to build complex prompts that are dependent on the inputs.</p><blockquote><p>For example, you could implement a conditional where a certain set of prompts is used when the condition is met. This is particularly usefull when you&#x27;d like to provide information/examples to the model to help it generate better results.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-conditional"><code>when</code> conditional<a href="#when-conditional" class="hash-link" aria-label="Direct link to when-conditional" title="Direct link to when-conditional">​</a></h3><p>A <code>when</code> conditional is similar to an <code>if</code> statement, where then the conditional has some data, it will execute the prompts under the conditional. Let&#x27;s consider the following example:</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 440.607 482.953" width="440.607" height="482.953" style="max-height:330px;width:100%"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Cascadia.woff2)}</style></defs><path fill="#fff" d="M0 0h440.607v482.953H0z"></path><path d="M8.053 11.86c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.648 22.5)">prompt_1</text><path d="M151.137 131.608c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(198.732 142.248)">prompt_2</text><path d="M151.137 229.676c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(198.732 240.316)">prompt_3</text><path d="M8.03 327.745c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 338.385)">prompt_4</text><path d="M8.03 425.813c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 436.453)">prompt_5</text><g stroke-linecap="round"><path d="M98.613 59.15c-.44 87.45-.94 172.08 2.45 265.88m-1.37-265.61c1.11 87.3 1.12 173 .2 265.28" stroke="#000" fill="none"></path><path d="M88.233 295.37c4.04 11.66 6.65 19.72 13.17 29.52m-11.82-29.18c3.11 10.32 6.41 18.54 10.34 28.76" stroke="#000" fill="none"></path><path d="M108.753 295.51c-2.58 11.54-6.59 19.55-7.35 29.38m8.7-29.04c-3.59 10.1-6.99 18.27-10.18 28.62" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M100.344 376.631c.59 13.55 1.18 26.32-1.64 47.79m1.69-46.48c-.73 9.68-1.55 21.3-.56 44.93" stroke="#000" fill="none"></path><path d="M92.004 400.871c2.92 6.31 5.97 11.9 6.61 23.65m-6.56-22.34c1.49 3.95 2.65 9.77 7.7 20.79" stroke="#000" fill="none"></path><path d="M107.444 400.481c-1.68 6.51-3.23 12.21-8.83 24.04m8.88-22.72c-2.23 3.9-4.78 9.81-7.74 21.17" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M131.286 62.053c38.28 27.24 78.27 52.99 95.97 68.09m-94.14-68.83c23.31 16.33 44.7 31.8 93.82 67.99M196.166 120.973c12.28 3.83 26.54 6.5 30.91 9.73m-29.09-10.48c7.73 2.31 13.94 4.16 28.77 9.64" stroke="#000" fill="none"></path><path d="M208.316 104.433c7.55 10.31 17 19.52 18.76 26.27m-16.94-27.01c5.01 6.09 8.38 11.8 16.62 26.17" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M211.343 280.831c-31.68 14.54-60.95 31.68-81.7 46.77m80.13-48.34c-30.92 17.71-63.41 35.82-80.58 46.42" stroke="#000" fill="none"></path><path d="M149.903 303.681c-9 5.43-15.66 13.95-19.27 22.96m17.69-24.53c-6.91 8.68-15.58 17.7-18.15 22.61" stroke="#000" fill="none"></path><path d="M160.373 321.321c-12.74-.87-23.19 1.25-29.74 5.32m28.16-6.88c-10.76 1.93-23.42 4.23-28.62 4.96" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M247.938 181.564c-.85 12.85.85 29.71 1.74 44.36m-1.91-46.69c1.52 14.02 1.15 29.21-.01 46.16" stroke="#000" fill="none"></path><path d="M240.538 204.944c1.19 5.1 5.06 14.17 8.49 20.16m-8.65-22.49c3.37 6.78 5 14.77 6.72 21.96" stroke="#000" fill="none"></path><path d="M256.388 205.804c-3.91 4.74-5.14 13.54-7.36 19.3m7.19-21.63c-1.35 6.59-4.44 14.33-9.12 21.1" stroke="#000" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(207.951 74.238)">when: conditional_1</text></svg><p>The config file for this agent would look like this:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">prompt_tree_when_agent/config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_1.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">when</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> condition_1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">assistant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_2.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_3.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">assistant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_4.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_5.jinja</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When executing this agent using the <code>Agent</code> class, you&#x27;d have to provide the input as:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">prompt_tree_when_agent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;condition_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_5&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_5&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will execute the prompts with the <code>when</code> conditional when the <code>condition_1</code> is present and has data in the input. However, when the <code>condition_1</code> is not present in the input, the prompts within the <code>when</code> conditional will not be executed.</p><p>The test cases to write within the <code>tests</code> folder will similarly have a similar structure to the input as above, but in yaml format.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="loop-operation"><code>loop</code> operation<a href="#loop-operation" class="hash-link" aria-label="Direct link to loop-operation" title="Direct link to loop-operation">​</a></h3><p>A loop operation is when you want to loop and execute a set of prompt statements with an array/list of data. Let&#x27;s consider the following example:</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 457.469 626.793" width="457.469" height="626.793" style="max-height:450px;width:100%"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Cascadia.woff2)}</style></defs><path fill="#fff" d="M0 0h457.469v626.793H0z"></path><path d="M8.03 77.374c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 88.014)">prompt_2</text><path d="M8.03 162.442c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 173.082)">prompt_3</text><g stroke-linecap="round"><path d="M100.344 126.26c.52 9.67 1.11 18.58-1.64 34.79m1.69-33.48c-.61 6.55-1.43 15.05-.56 31.93" stroke="#000" fill="none"></path><path d="M94.244 143.77c2.12 4.49 4.37 8.4 4.61 17.06m-4.57-16.01c1.04 2.7 1.81 6.91 5.48 14.76" stroke="#000" fill="none"></path><path d="M105.234 143.45c-1.15 4.64-2.18 8.65-6.38 17.38m6.42-16.33c-1.6 2.68-3.48 6.97-5.51 15.08" stroke="#000" fill="none"></path></g><path d="M8.03 240.798c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 251.438)">prompt_2</text><path d="M8.03 325.867c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 336.507)">prompt_3</text><g stroke-linecap="round"><path d="M100.344 289.685c.52 9.67 1.11 18.58-1.64 34.79m1.69-33.48c-.61 6.55-1.43 15.05-.56 31.93" stroke="#000" fill="none"></path><path d="M94.244 307.195c2.12 4.49 4.37 8.4 4.61 17.06m-4.57-16.01c1.04 2.7 1.81 6.91 5.48 14.76" stroke="#000" fill="none"></path><path d="M105.234 306.875c-1.15 4.64-2.18 8.65-6.38 17.38m6.42-16.33c-1.6 2.68-3.48 6.97-5.51 15.08" stroke="#000" fill="none"></path></g><path d="M8.03 474.978c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 485.618)">prompt_2</text><path d="M8.03 560.047c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 570.687)">prompt_3</text><g stroke-linecap="round"><path d="M100.344 523.864c.52 9.67 1.11 18.58-1.64 34.79m1.69-33.48c-.61 6.55-1.43 15.05-.56 31.93" stroke="#000" fill="none"></path><path d="M94.244 541.374c2.12 4.49 4.37 8.4 4.61 17.06m-4.57-16.01c1.04 2.7 1.81 6.91 5.48 14.76" stroke="#000" fill="none"></path><path d="M105.234 541.054c-1.15 4.64-2.18 8.65-6.38 17.38m6.42-16.33c-1.6 2.68-3.48 6.97-5.51 15.08" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M100.932 209.94c.19 4.29 1.57 22.22 1.93 26.83m-.13-27.87c.01 4.96-.88 24.06-.95 29.09M97.492 224.64c.7 4.26 2.96 8.78 4.23 14.64m-4.26-14.76c1.44 3.04 2.31 6.48 4.05 13.96" stroke="#000" fill="none"></path><path d="M106.892 224.93c-2.15 4.12-2.74 8.54-5.17 14.35m5.14-14.47c-.77 3-2.11 6.37-5.35 13.67" stroke="#000" fill="none"></path></g><text font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(94.135 410.457)">...</text><g stroke-linecap="round"><path d="M100.44 377.114c-.37 5.03-2.58 24.13-3.1 28.85m1.53-29.53c.12 5.25 1.28 25.82.85 30.77" stroke="#000" fill="none"></path><path d="M95.49 392.174c-.58 3.03-.2 5.99 4.74 16.14m-5.08-15.99c.77 4.36 2.31 8.97 4.13 15.01" stroke="#000" fill="none"></path><path d="M105.82 392.214c-2.76 3.01-4.58 5.96-5.59 16.1m5.25-15.95c-2.09 4.44-3.4 9.04-6.2 14.97" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M101.56 439.298c-.32 5.14-.72 26.22-1.26 31.39m-.06-29.36c-.47 4.84-.43 22.49-.34 27.55" stroke="#000" fill="none"></path><path d="M93.34 456.228c4.01 2.84 5.48 9.13 5.19 11.8m-3.5-12.64c.96 4.57 3.09 9.75 5.16 13.71" stroke="#000" fill="none"></path><path d="M103.51 456.148c.18 2.89-2.2 9.21-4.98 11.88m6.67-12.72c-2.62 4.68-4.07 9.88-5.01 13.79" stroke="#000" fill="none"></path></g><path d="M193.971 66.47c3.72-.26 17.94-1.01 21.61-1.14m-22.99.27c3.56-.15 17.99.84 21.74 1.08" stroke="#000" fill="none" stroke-linecap="round"></path><path d="M213.566 63.552c-.39 25.59-2.83 127.42-3.34 153.35m2.47-151.09c-.05 25.76-.39 126.75-.35 152M210.338 217.481c-3.71.08-18.78-1.51-22.57-1.63m21.39 1.1c-3.9.33-18.68-.11-22.43.1M193.971 230.353c3.72-.26 17.94-1.01 21.61-1.14m-22.99.27c3.56-.15 17.99.84 21.74 1.08" stroke="#000" fill="none" stroke-linecap="round"></path><path d="M213.566 227.435c-.39 25.59-2.83 127.42-3.34 153.35m2.47-151.09c-.05 25.76-.39 126.75-.35 152M210.338 381.365c-3.71.08-18.78-1.51-22.57-1.63m21.39 1.1c-3.9.33-18.68-.11-22.43.1M193.971 465.45c3.72-.26 17.94-1.01 21.61-1.14m-22.99.27c3.56-.15 17.99.84 21.74 1.08" stroke="#000" fill="none" stroke-linecap="round"></path><path d="M213.566 462.533c-.39 25.59-2.83 127.42-3.34 153.35m2.47-151.09c-.05 25.76-.39 126.75-.35 152M210.338 616.463c-3.71.08-18.78-1.51-22.57-1.63m21.39 1.1c-3.9.33-18.68-.11-22.43.1" stroke="#000" fill="none" stroke-linecap="round"></path><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(217.248 10)">loop: statement_1</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(236.531 130.617)">- value_set_1: ...</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(236.531 290.488)">- value_set_2: ...</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(236.531 528.555)">- value_set_3: ...</text></svg><p>Where prompt_2 and promt_3 are executed in a loop and added to the final prompt. Each set of prompt tempaltes are rendered against a set of inputs. The config file for this agent would look like this:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">prompt_tree_loop_agent/config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_1.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">loop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> loop_1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">assistant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_2.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_3.jinja</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When executing this agent using the Agent class, you&#x27;d have to provide the input as:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">prompt_tree_loop_agent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;loop_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 2, set 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 3, set 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 2, set 2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 3, set 2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 2, set 3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 3, set 3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will execute the prompt tempaltes within the <code>loop_1</code> key against the set of template values provided as a list of dictionaries. However, when <code>loop_1</code> is not present in the input or no data is provided for the <code>loop_1</code> key, the prompts within the <code>loop_1</code> loop operation will not be executed.</p><p>The test cases to write within the <code>tests</code> folder will similarly have a similar structure to the input as above, but in yaml format.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="switch-conditional-operation"><code>switch</code> conditional operation<a href="#switch-conditional-operation" class="hash-link" aria-label="Direct link to switch-conditional-operation" title="Direct link to switch-conditional-operation">​</a></h3><p>The <code>switch</code> conditional operation is similar to the <code>when</code> conditional operation, but instead of a single condition, you can provide multiple cases of the condition and the prompts within the <code>cases</code> of the <code>switch</code> operation will be executed when that case is present. Let&#x27;s consider the following example:</p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 788.766 289.348" width="788.766" height="auto" style="max-width:550px;width:100%"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://file%2B.vscode-resource.vscode-cdn.net/Users/adithya/.vscode/extensions/pomdtr.excalidraw-editor-3.5.1/public//dist/excalidraw-assets/Cascadia.woff2)}</style></defs><path fill="#fff" d="M0 0h788.766v289.348H0z"></path><path d="M300.145 11.86c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(347.74 22.5)">prompt_1</text><path d="M299.913 134.14c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(347.508 144.78)">prompt_4</text><path d="M299.913 232.208c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(347.508 242.848)">prompt_5</text><g stroke-linecap="round"><path d="M392.227 183.026c.59 13.55 1.18 26.32-1.64 47.79m1.69-46.48c-.73 9.68-1.55 21.3-.56 44.93" stroke="#000" fill="none"></path><path d="M383.887 207.266c2.92 6.31 5.97 11.9 6.61 23.65m-6.56-22.34c1.49 3.95 2.65 9.77 7.7 20.79" stroke="#000" fill="none"></path><path d="M399.327 206.876c-1.68 6.51-3.23 12.21-8.83 24.04m8.88-22.72c-2.23 3.9-4.78 9.81-7.74 21.17" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M305.781 60.19c-71.26 26.99-140.83 53.88-181.01 70.95m182.84-71.69c-41.34 15.32-84.61 31.46-183.17 70.85" stroke="#000" fill="none"></path><path d="M144.901 110.47c-7.92 8.12-13.93 15.34-20.31 21.23m22.14-21.98c-4.16 4.69-9.91 9.22-22.46 21.13" stroke="#000" fill="none"></path><path d="M152.461 129.55c-11 .53-20 .21-27.87 2.15m29.69-2.9c-6.05.19-13.56.27-30.01 2.05" stroke="#000" fill="none"></path></g><path d="M8.03 134.14c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 144.78)">prompt_2</text><path d="M8.03 232.208c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(55.625 242.848)">prompt_3</text><g stroke-linecap="round"><path d="M104.83 184.095c-.85 12.85.85 29.71 1.74 44.36m-1.91-46.69c1.52 14.02 1.15 29.21-.01 46.16" stroke="#000" fill="none"></path><path d="M97.43 207.475c1.19 5.1 5.06 14.17 8.49 20.16m-8.65-22.49c3.37 6.78 5 14.77 6.72 21.96" stroke="#000" fill="none"></path><path d="M113.28 208.335c-3.91 4.74-5.14 13.54-7.36 19.3m7.19-21.63c-1.35 6.59-4.44 14.33-9.12 21.1" stroke="#000" fill="none"></path></g><path d="M591.796 134.14c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(639.39 144.78)">prompt_6</text><path d="M591.796 232.208c49.87-.28 96.77-.44 188.48-3.52m-185.68.69c49.1.43 97.3-.31 184.79.22m-2.08 2.16c2.12 9.83.41 25.5 1.18 47.43m.03-48.97c.4 10.17-.78 22.35-.08 48.16m2.12.82c-72.08 1.32-142.93 1.59-187.67.27m184.98-.83c-54.78.21-109.73.85-184.9 1.54m-.17-2.19c1.89-14.14.77-28.34 2.67-48.66m-1.41 49.64c-.61-13.88-1.27-28.07-.29-49.32" stroke="#000" fill="none" stroke-linecap="round"></path><text x="46.875" font-family="Cascadia, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(639.39 242.848)">prompt_7</text><g stroke-linecap="round"><path d="M688.596 184.095c-.85 12.85.85 29.71 1.74 44.36m-1.91-46.69c1.52 14.02 1.15 29.21-.01 46.16" stroke="#000" fill="none"></path><path d="M681.196 207.475c1.19 5.1 5.06 14.17 8.49 20.16m-8.65-22.49c3.37 6.78 5 14.77 6.72 21.96" stroke="#000" fill="none"></path><path d="M697.046 208.335c-3.91 4.74-5.14 13.54-7.36 19.3m7.19-21.63c-1.35 6.59-4.44 14.33-9.12 21.1" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M493.103 56.497c26.11 12.36 129.29 61.35 154.98 73.64m-156.05-71.32c26.1 12.12 129.82 58.04 155.57 69.63" stroke="#000" fill="none"></path><path d="M616.753 127.807c8.98-1.08 15.82-2.31 31.34 2.59m-30.96-4.37c9.15 1.57 18.87 2.09 30.6 2.69" stroke="#000" fill="none"></path><path d="M625.113 109.067c6.94 3.17 11.9 6.14 22.98 21.33m-22.6-23.11c6.57 7.42 13.68 13.79 22.24 21.43" stroke="#000" fill="none"></path></g><g stroke-linecap="round"><path d="M394.428 60.354c.42 11.82 2.39 59.87 2.75 71.69m-1.14-72.77c.3 11.42-.56 58.84-.09 71.06M385.388 101.304c3.9 5.4 4.95 12.77 10.75 30.97m-11.1-29.69c3.52 8.09 6.12 14.24 10.71 28.19" stroke="#000" fill="none"></path><path d="M405.908 101.164c-.71 5.23-4.26 12.64-9.77 31.11m9.42-29.83c-1.93 8.1-4.77 14.29-9.81 28.33" stroke="#000" fill="none"></path></g><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(105.285 73.16)">case_1</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(316.047 73.16)">case_2</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(600.262 73.16)">default</text><text font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(12.719 21.527)">switch: conditional_2</text></svg><p>The config file for this agent would look like this:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">prompt_tree_switch_agent/config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_1.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">switch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> switch_1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">case_value_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">assistant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_2.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_3.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">case_value_2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">assistant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_4.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_5.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">assistant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_6.jinja</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> prompt_7.jinja</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where the <code>switch_1</code> operation has three cases, and each case has different prompts and sequence in them. When then <code>switch_1</code> key has the value of one of the cases, the prompt tempaltes under that are executed with the values provided. The <code>default</code> (optional case to have) case is executed when none of the cases are present in the input. When executing this agent using the Agent class, you&#x27;d have to provide the input as:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">prompt_tree_switch_agent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;switch_1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;case_value_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 2, set 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;prompt_5&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;variable_3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is the value for variable 3, set 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which will execute the prompt templates within the case <code>case_value_2</code>. However, when <code>switch_1</code> is not present in the input or no data is provided for the <code>switch_1</code> key, the prompts within the <code>switch_1</code> switch operation will not be executed.</p><p>The test cases to write within the tests folder will similarly have a similar structure to the input as above, but in yaml format.</p><p>Example implementations of the above agents can be found in the PDX repository <a href="https://github.com/pdx-labs/pdx/tree/main/demos" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/pdx-labs/website-pdx/docs/getting-started/05-advanced-prompting.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/getting-started/create-an-agent"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create an Agent</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pdx-cli/create"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">create</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#chat-prompt" class="table-of-contents__link toc-highlight">Chat Prompt</a></li><li><a href="#prompt-trees" class="table-of-contents__link toc-highlight">Prompt Trees</a><ul><li><a href="#when-conditional" class="table-of-contents__link toc-highlight"><code>when</code> conditional</a></li><li><a href="#loop-operation" class="table-of-contents__link toc-highlight"><code>loop</code> operation</a></li><li><a href="#switch-conditional-operation" class="table-of-contents__link toc-highlight"><code>switch</code> conditional operation</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 PDX.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ca00e62b.js"></script>
<script src="/assets/js/main.278252f8.js"></script>
</body>
</html>